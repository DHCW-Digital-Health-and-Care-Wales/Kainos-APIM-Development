# Vulnerability Scanning


Starting with .NET 8 SDK Preview 4, `dotnet restore` automatically audits NuGet dependencies for known vulnerabilities. It emits warnings based on severity levels.

---

## Running the Scan

Use the standard restore command:

```bash
dotnet restore
```

If vulnerable packages are detected, warnings like `NU1901` to `NU1904` will be shown.

---

## Warning Codes

- `NU1901`: Low severity
- `NU1902`: Moderate severity
- `NU1903`: High severity
- `NU1904`: Critical severity

---

## Configuration

Add the following to your `Directory.Build.props` or `.csproj` file:

```xml
<Project>
  <PropertyGroup>
    <!-- Enable auditing (default in .NET 8+) -->
    <NuGetAudit>true</NuGetAudit>

    <!-- Set minimum severity level to report -->
    <NuGetAuditLevel>moderate</NuGetAudit> <!-- Options: low, moderate, high, critical -->

    <!-- Treat vulnerability warnings as errors -->
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>

    <!-- Allow specific warnings without failing build -->
    <WarningsNotAsErrors>NU1901;NU1902</WarningsNotAsErrors>
  </PropertyGroup>
</Project>
```

---

## Best Practices

- Keep `<NuGetAudit>` enabled in CI/CD pipelines.
- Use `<NuGetAuditLevel>` to control sensitivity.
- Avoid suppressing critical warnings unless justified. When suppressing ensure they are still displayed in CI and locally.
- Regularly update dependencies to resolve flagged vulnerabilities.

---

## References

- [Microsoft Docs â€“ dotnet restore audit](https://learn.microsoft.com/en-us/dotnet/core/compatibility/sdk/8.0/dotnet-restore-audit)
